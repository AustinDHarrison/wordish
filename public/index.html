<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wordle Style Grid + Keyboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
        }

        .wordle-grid {
            margin: 20px auto;
            border-collapse: collapse;
        }

        .wordle-grid td {
            width: 60px;
            height: 60px;
            border: 2px solid #adb5bd;
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            text-transform: uppercase;
            vertical-align: middle;
        }

        .keyboard {
            max-width: 600px;
            margin: 20px auto;
            text-align: center;
        }

        .keyboard-row {
            margin-bottom: 10px;
        }

        .key-btn {
            min-width: 40px;
            margin: 2px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .wide-btn {
            min-width: 70px;
        }
    </style>
</head>

<body>

    <!-- Wordle Grid -->
    <table class="wordle-grid">
        <tbody>
            <!-- 6 Rows of 5 letters -->
            <tr>
                <td id="cell-0-0"></td>
                <td id="cell-0-1"></td>
                <td id="cell-0-2"></td>
                <td id="cell-0-3"></td>
                <td id="cell-0-4"></td>
            </tr>
            <tr>
                <td id="cell-1-0"></td>
                <td id="cell-1-1"></td>
                <td id="cell-1-2"></td>
                <td id="cell-1-3"></td>
                <td id="cell-1-4"></td>
            </tr>
            <tr>
                <td id="cell-2-0"></td>
                <td id="cell-2-1"></td>
                <td id="cell-2-2"></td>
                <td id="cell-2-3"></td>
                <td id="cell-2-4"></td>
            </tr>
            <tr>
                <td id="cell-3-0"></td>
                <td id="cell-3-1"></td>
                <td id="cell-3-2"></td>
                <td id="cell-3-3"></td>
                <td id="cell-3-4"></td>
            </tr>
            <tr>
                <td id="cell-4-0"></td>
                <td id="cell-4-1"></td>
                <td id="cell-4-2"></td>
                <td id="cell-4-3"></td>
                <td id="cell-4-4"></td>
            </tr>
            <tr>
                <td id="cell-5-0"></td>
                <td id="cell-5-1"></td>
                <td id="cell-5-2"></td>
                <td id="cell-5-3"></td>
                <td id="cell-5-4"></td>
            </tr>
        </tbody>
    </table>

    <!-- Keyboard -->
    <div class="keyboard">
        <!-- Row 1 -->
        <div class="keyboard-row">
            <button class="btn btn-secondary key-btn" onclick="keyboard('Q', this)">Q</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('W', this)">W</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('E', this)">E</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('R', this)">R</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('T', this)">T</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('Y', this)">Y</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('U', this)">U</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('I', this)">I</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('O', this)">O</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('P', this)">P</button>
        </div>

        <!-- Row 2 -->
        <div class="keyboard-row">
            <button class="btn btn-secondary key-btn" onclick="keyboard('A', this)">A</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('S', this)">S</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('D', this)">D</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('F', this)">F</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('G', this)">G</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('H', this)">H</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('J', this)">J</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('K', this)">K</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('L', this)">L</button>
        </div>

        <!-- Row 3 -->
        <div class="keyboard-row">
            <button class="btn btn-dark wide-btn" onclick="keyboard('Enter', this)">Enter</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('Z', this)">Z</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('X', this)">X</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('C', this)">C</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('V', this)">V</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('B', this)">B</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('N', this)">N</button>
            <button class="btn btn-secondary key-btn" onclick="keyboard('M', this)">M</button>
            <button class="btn btn-dark wide-btn" onclick="keyboard('Del', this)">Del</button>
        </div>
    </div>
    <script>
        const response = await fetch('http://wordish.austindharrison.com/word.json', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
        const data = await response.json();
        let currentRow = 0;
        let currentCol = 0;
        const currentWord = []
        const correctWord = data.word.toUpperCase()
        let correctAmount = 0
        async function keyboard(letter, element) {
            console.log("Pressed:", letter);

            if (letter === "Enter") {
                if (currentCol === 5) {
                    currentRow++;
                    currentCol = 0;
                }
                if (currentRow > 6) {
                    alert("No more attempts left!");
                    return;
                }


                const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${currentWord.join('')}`, {
                })

                const data = await response.json();
                if (!data || data.title === "No Definitions Found") {
                    currentRow--;
                    currentCol = 0;
                    for (let index = 0; index < 5; index++) {
                        const cell = document.getElementById(`cell-${currentRow}-${index}`);
                        cell.textContent = "";
                    }
                    currentWord.length = 0;
                    return;
                }
                if (currentWord.join('')) {
                    for (let index = 0; index < currentWord.length; index++) {
                        const letter = currentWord[index];
                        const cell = document.getElementById(`cell-${currentRow - 1}-${index}`);
                        if (letter === correctWord[index]) {
                            for (let btn of document.querySelectorAll('.key-btn, .wide-btn')) {
                                if (btn.textContent.trim() === letter) {
                                    btn.classList.add('btn-success');
                                }
                            }
                        cell.style.backgroundColor = "#6aaa64"; // green for correct place
                        cell.style.color = "#fff";
                        correctAmount++;
                    } else if (correctWord.includes(letter)) {
                                                    for (let btn of document.querySelectorAll('.key-btn, .wide-btn')) {
                                if (btn.textContent.trim() === letter && !btn.classList.contains('btn-success')) {
                                    btn.classList.add('btn-warning');
                                }
                            }
                        cell.style.backgroundColor = "#c9b458"; // yellow for correct letter, wrong place
                        cell.style.color = "#fff";
                            for (let btn of document.querySelectorAll('.key-btn, .wide-btn')) {
                                if (btn.textContent.trim() === letter) {
                                    btn.classList.add('btn-success');
                                }
                            }
                    } else {
                        cell.style.backgroundColor = "#787c7e"; // gray for not in word
                        cell.style.color = "#fff";
                    }
                }
                if (correctAmount === 5) {
                    alert("Congratulations! You've guessed the word!");
                }

                return;
            }
        }

            if (letter === "Del") {
                if (currentCol > 0) {
                    currentCol--;
                    document.getElementById(`cell-${currentRow}-${currentCol}`).textContent = "";
                }
                return;
            }

            if (currentCol < 5 && currentRow < 6) {
                let cell = document.getElementById(`cell-${currentRow}-${currentCol}`);
                cell.textContent = letter;
                currentWord[currentCol] = letter;
                currentCol++;
            }
            
        }
    </script>

</body>

</html>